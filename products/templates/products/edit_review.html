{% extends "base.html" %}
{% load static %}

{% block title %}–†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –≤—ñ–¥–≥—É–∫ - {{ product.name }} - Tavero{% endblock %}

{% block content %}
<div class="edit-review-page">
    <div class="review-header">
        <nav class="breadcrumb">
            <a href="{% url 'home' %}">–ì–æ–ª–æ–≤–Ω–∞</a> &gt;
            <a href="{% url 'products:list' %}">–¢–æ–≤–∞—Ä–∏</a> &gt;
            <a href="{% url 'products:detail' product.slug %}">{{ product.name }}</a> &gt;
            <span>–†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –≤—ñ–¥–≥—É–∫</span>
        </nav>

        <h1>‚úèÔ∏è –†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –≤—ñ–¥–≥—É–∫</h1>
        <p class="product-info">
            –¢–æ–≤–∞—Ä: <strong>{{ product.name }}</strong>
        </p>
    </div>

    <div class="review-form-container">
        <form method="post" class="review-form">
            {% csrf_token %}

            <div class="form-group">
                <label for="{{ form.rating.id_for_label }}">–í–∞—à–∞ –æ—Ü—ñ–Ω–∫–∞ *</label>
                {{ form.rating }}
                {% if form.rating.errors %}
                    <div class="error-message">{{ form.rating.errors.0 }}</div>
                {% endif %}
                <small class="help-text">–û–±–µ—Ä—ñ—Ç—å –æ—Ü—ñ–Ω–∫—É –≤—ñ–¥ 1 –¥–æ 5 –∑—ñ—Ä–æ–∫</small>
            </div>

            <div class="form-group">
                <label for="{{ form.comment.id_for_label }}">–í–∞—à –≤—ñ–¥–≥—É–∫ *</label>
                {{ form.comment }}
                {% if form.comment.errors %}
                    <div class="error-message">{{ form.comment.errors.0 }}</div>
                {% endif %}
                <small class="help-text">–ü–æ–¥—ñ–ª—ñ—Ç—å—Å—è —Å–≤–æ—ó–º–∏ –≤—Ä–∞–∂–µ–Ω–Ω—è–º–∏ –ø—Ä–æ —Ç–æ–≤–∞—Ä</small>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn btn-primary">üíæ –ó–±–µ—Ä–µ–≥—Ç–∏ –∑–º—ñ–Ω–∏</button>
                <a href="{% url 'products:detail' product.slug %}" class="btn btn-secondary">–°–∫–∞—Å—É–≤–∞—Ç–∏</a>
            </div>
        </form>
    </div>

    <div class="current-review">
        <h3>–ü–æ—Ç–æ—á–Ω–∏–π –≤—ñ–¥–≥—É–∫</h3>
        <div class="review-item">
            <div class="review-header">
                <div class="stars">
                    {% for i in "12345" %}
                        {% if forloop.counter <= review.rating %}
                            <span class="star filled">‚òÖ</span>
                        {% else %}
                            <span class="star">‚òÜ</span>
                        {% endif %}
                    {% endfor %}
                </div>
                <span class="review-date">{{ review.created_at|date:"d.m.Y" }}</span>
            </div>
            <p class="review-comment">{{ review.comment }}</p>
        </div>
    </div>
</div>
{% endblock %}
