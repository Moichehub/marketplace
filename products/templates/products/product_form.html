{% extends "base.html" %}
{% load static %}
{% load i18n %}

{% block title %}{% if mode == 'create' %}–ù–æ–≤–∏–π —Ç–æ–≤–∞—Ä{% else %}–†–µ–¥–∞–≥—É–≤–∞—Ç–∏ —Ç–æ–≤–∞—Ä{% endif %} ‚Äî Tavero{% endblock %}

{% block content %}
<div class="product-form-container">
    <div class="product-form-card">
        <div class="product-form-header">
            <h1>{% if mode == 'create' %}‚ûï –°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–∏–π —Ç–æ–≤–∞—Ä{% else %}‚úèÔ∏è –†–µ–¥–∞–≥—É–≤–∞—Ç–∏ —Ç–æ–≤–∞—Ä{% endif %}</h1>
            <p>{% if mode == 'create' %}–î–æ–¥–∞–π—Ç–µ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –≤–∞—à —Ç–æ–≤–∞—Ä{% else %}–û–Ω–æ–≤—ñ—Ç—å —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ —Ç–æ–≤–∞—Ä{% endif %}</p>
        </div>

        {% if form.errors %}
            <div class="alert alert-error">
                <p>‚ùå –ë—É–¥—å –ª–∞—Å–∫–∞, –≤–∏–ø—Ä–∞–≤—Ç–µ –ø–æ–º–∏–ª–∫–∏ –≤ —Ñ–æ—Ä–º—ñ.</p>
            </div>
        {% endif %}

        <form method="post" enctype="multipart/form-data" class="product-form">
            {% csrf_token %}
            
            <div class="form-row">
                <div class="form-group">
                    <label for="id_name">üì¶ –ù–∞–∑–≤–∞ —Ç–æ–≤–∞—Ä—É:</label>
                    {{ form.name }}
                    {% if form.name.errors %}
                        <div class="field-error">
                            {% for error in form.name.errors %}
                                <p>{{ error }}</p>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>

                <div class="form-group">
                    <label for="id_category">üè∑Ô∏è –ö–∞—Ç–µ–≥–æ—Ä—ñ—è:</label>
                    {{ form.category }}
                    {% if form.category.errors %}
                        <div class="field-error">
                            {% for error in form.category.errors %}
                                <p>{{ error }}</p>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="id_price">üí∞ –¶—ñ–Ω–∞ (‚Ç¥):</label>
                    {{ form.price }}
                    {% if form.price.errors %}
                        <div class="field-error">
                            {% for error in form.price.errors %}
                                <p>{{ error }}</p>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>

                <div class="form-group">
                    <label for="id_stock">üì¶ –ö—ñ–ª—å–∫—ñ—Å—Ç—å –Ω–∞ —Å–∫–ª–∞–¥—ñ:</label>
                    {{ form.stock }}
                    {% if form.stock.errors %}
                        <div class="field-error">
                            {% for error in form.stock.errors %}
                                <p>{{ error }}</p>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>

            <div class="form-group">
                <label for="id_description">üìù –û–ø–∏—Å —Ç–æ–≤–∞—Ä—É:</label>
                {{ form.description }}
                {% if form.description.errors %}
                    <div class="field-error">
                        {% for error in form.description.errors %}
                            <p>{{ error }}</p>
                        {% endfor %}
                    </div>
                {% endif %}
                {% if form.description.help_text %}
                    <div class="help-text">{{ form.description.help_text }}</div>
                {% endif %}
            </div>

            <div class="form-group">
                <label for="id_image">üñºÔ∏è –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ç–æ–≤–∞—Ä—É:</label>
                {{ form.image }}
                {% if form.image.errors %}
                    <div class="field-error">
                        {% for error in form.image.errors %}
                            <p>{{ error }}</p>
                        {% endfor %}
                    </div>
                {% endif %}
                {% if form.image.help_text %}
                    <div class="help-text">{{ form.image.help_text }}</div>
                {% endif %}
                {% if product and product.image %}
                    <div class="help-text">üì∑ –ü–æ—Ç–æ—á–Ω–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è: {{ product.image.name }}</div>
                {% endif %}
            </div>

            <div class="form-group">
                <label for="id_is_active">‚úÖ –°—Ç–∞—Ç—É—Å —Ç–æ–≤–∞—Ä—É:</label>
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                    {{ form.is_active }}
                    <span>–ê–∫—Ç–∏–≤–Ω–∏–π (—Ç–æ–≤–∞—Ä –±—É–¥–µ –≤–∏–¥–∏–º–∏–π –¥–ª—è –ø–æ–∫—É–ø—Ü—ñ–≤)</span>
                </div>
                {% if form.is_active.errors %}
                    <div class="field-error">
                        {% for error in form.is_active.errors %}
                            <p>{{ error }}</p>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>

            <div class="form-actions">
                <button type="submit" class="btn btn-primary">
                    {% if mode == 'create' %}üöÄ –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ç–æ–≤–∞—Ä{% else %}üíæ –ó–±–µ—Ä–µ–≥—Ç–∏ –∑–º—ñ–Ω–∏{% endif %}
                </button>
                <a href="{% url 'products:seller_dashboard' %}" class="btn btn-secondary">‚ùå –°–∫–∞—Å—É–≤–∞—Ç–∏</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}
