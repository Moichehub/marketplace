{% extends "base.html" %}
{% load static %}
{% load i18n %}

{% block title %}–ü–∞–Ω–µ–ª—å –ø—Ä–æ–¥–∞–≤—Ü—è ‚Äî Tavero{% endblock %}

{% block content %}
<div class="seller-dashboard">
    <div class="dashboard-header">
        <h1>üìä –ü–∞–Ω–µ–ª—å –ø—Ä–æ–¥–∞–≤—Ü—è</h1>
        <p>–ö–µ—Ä—É–π—Ç–µ —Å–≤–æ—ó–º–∏ —Ç–æ–≤–∞—Ä–∞–º–∏ —Ç–∞ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è–º–∏</p>
    </div>

    <!-- Statistics -->
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon">üì¶</div>
            <div class="stat-content">
                <h3>{{ total_products }}</h3>
                <p>–í—Å—å–æ–≥–æ —Ç–æ–≤–∞—Ä—ñ–≤</p>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">‚úÖ</div>
            <div class="stat-content">
                <h3>{{ active_products }}</h3>
                <p>–ê–∫—Ç–∏–≤–Ω–∏—Ö —Ç–æ–≤–∞—Ä—ñ–≤</p>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">‚≠ê</div>
            <div class="stat-content">
                <h3>{{ total_reviews }}</h3>
                <p>–í—ñ–¥–≥—É–∫—ñ–≤</p>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">üìä</div>
            <div class="stat-content">
                <h3>{{ avg_rating }}</h3>
                <p>–°–µ—Ä–µ–¥–Ω—ñ–π —Ä–µ–π—Ç–∏–Ω–≥</p>
            </div>
        </div>
    </div>

    <!-- Actions -->
    <div class="dashboard-actions">
        <a href="{% url 'products:create' %}" class="btn btn-primary">‚ûï –î–æ–¥–∞—Ç–∏ —Ç–æ–≤–∞—Ä</a>
        {% if seller_profile %}
            <a href="{% url 'accounts:seller_profile_edit' %}" class="btn btn-secondary">‚úèÔ∏è –†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å</a>
        {% else %}
            <a href="{% url 'accounts:seller_profile_setup' %}" class="btn btn-secondary">üè™ –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –º–∞–≥–∞–∑–∏–Ω</a>
        {% endif %}
    </div>

    <!-- Products Grid -->
    <div class="dashboard-products">
        {% if products %}
            <div class="grid">
                {% for product in products %}
                    <article class="card product-card">
                        {% if product.slug %}
                            <a href="{% url 'products:detail' slug=product.slug %}">
                                {% if product.image %}
                                    <img src="{{ product.image.url }}" alt="{{ product.name }}">
                                {% else %}
                                    <div class="no-image">üì∑</div>
                                {% endif %}
                                <div class="card-content">
                                    <h3>{{ product.name }}</h3>
                                    <div class="muted">{{ product.category.name }}</div>
                                    <strong>{{ product.price }} ‚Ç¥</strong>
                                    <div class="product-meta">
                                        <span class="stock-info">–°–∫–ª–∞–¥: {{ product.stock }} —à—Ç.</span>
                                        <span class="status-badge {% if product.is_active %}status-active{% else %}status-inactive{% endif %}">
                                            {% if product.is_active %}‚úÖ –ê–∫—Ç–∏–≤–Ω–∏–π{% else %}‚è∏Ô∏è –ù–µ–∞–∫—Ç–∏–≤–Ω–∏–π{% endif %}
                                        </span>
                                    </div>
                                </div>
                            </a>
                            <div class="card-actions">
                                <a href="{% url 'products:update' slug=product.slug %}" class="btn-edit-small">‚úèÔ∏è –†–µ–¥–∞–≥—É–≤–∞—Ç–∏</a>
                                <a href="{% url 'products:detail' slug=product.slug %}" class="btn-view-small">üëÅÔ∏è –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏</a>
                                <a href="{% url 'products:delete' slug=product.slug %}" class="btn-delete-small">üóëÔ∏è –í–∏–¥–∞–ª–∏—Ç–∏</a>
                            </div>
                        {% else %}
                            <div class="card-content">
                                <h3>{{ product.name }}</h3>
                                <div class="muted">{{ product.category.name }}</div>
                                <strong>{{ product.price }} ‚Ç¥</strong>
                                <div class="product-meta">
                                    <span class="stock-info">–°–∫–ª–∞–¥: {{ product.stock }} —à—Ç.</span>
                                    <span class="status-badge {% if product.is_active %}status-active{% else %}status-inactive{% endif %}">
                                        {% if product.is_active %}‚úÖ –ê–∫—Ç–∏–≤–Ω–∏–π{% else %}‚è∏Ô∏è –ù–µ–∞–∫—Ç–∏–≤–Ω–∏–π{% endif %}
                                    </span>
                                </div>
                                <div class="alert alert-warning">
                                    <p>‚ö†Ô∏è –¶–µ–π —Ç–æ–≤–∞—Ä –ø–æ—Ç—Ä–µ–±—É—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è slug. –ë—É–¥—å –ª–∞—Å–∫–∞, –≤—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ —Ç–æ–≤–∞—Ä.</p>
                                </div>
                            </div>
                            <div class="card-actions">
                                <span class="btn-edit-small disabled">‚úèÔ∏è –†–µ–¥–∞–≥—É–≤–∞—Ç–∏</span>
                                <span class="btn-view-small disabled">üëÅÔ∏è –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏</span>
                                <span class="btn-delete-small disabled">üóëÔ∏è –í–∏–¥–∞–ª–∏—Ç–∏</span>
                            </div>
                        {% endif %}
                    </article>
                {% endfor %}
            </div>
        {% else %}
            <div class="empty-state">
                <div class="empty-icon">üì¶</div>
                <h3>–£ –≤–∞—Å –ø–æ–∫–∏ –Ω–µ–º–∞—î —Ç–æ–≤–∞—Ä—ñ–≤</h3>
                <p>–°—Ç–≤–æ—Ä—ñ—Ç—å —Å–≤—ñ–π –ø–µ—Ä—à–∏–π —Ç–æ–≤–∞—Ä, —â–æ–± –ø–æ—á–∞—Ç–∏ –ø—Ä–æ–¥–∞–≤–∞—Ç–∏ –Ω–∞ Tavero</p>
                <a href="{% url 'products:create' %}" class="btn btn-primary">‚ûï –î–æ–¥–∞—Ç–∏ –ø–µ—Ä—à–∏–π —Ç–æ–≤–∞—Ä</a>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}
